using Persistence.Features.Client.Models;

namespace UI.Components.Pages;

public partial class Dashboard
{
    private string? _message;
    private string? _newCommand;
    private List<ClientModel>? _clients;

    private bool dummy;
    
    protected override async Task OnInitializedAsync()
    {
        await FetchClients();
    }

    #region Button
    private async Task RefreshButton()
    {
        await FetchClients();
        StateHasChanged();
    }

    private async Task ChangeCommand()
    {
        //await clientService.
    }
    #endregion

    #region Helper
    private async Task FetchClients()
    {
        var result = await clientService.GetClientsAsync();
        if (!result.Success)
        {
            _message = !string.IsNullOrEmpty(result.Message)
                ? result.Message
                : "Error while fetching all clients from the database";
            return;
        }

        if (result.Data == null || result.Data.Count == 0)
        {
            _message = "No clients found in the database";
            return;
        }

        _clients = result.Data;
    }
    #endregion
}