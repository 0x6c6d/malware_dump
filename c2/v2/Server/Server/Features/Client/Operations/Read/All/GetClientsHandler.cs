using Server.Features.Client.Repositories;

namespace Server.Features.Client.Operations.Read.All;

public class GetClientsHandler(IClientRepository clientRepository) : IRequestHandler<GetClientsRequest, List<GetClientsReturn>>
{
    public async Task<List<GetClientsReturn>> Handle(GetClientsRequest request, CancellationToken cancellationToken)
    {
        var clients = (await clientRepository.GetAllAsync()).OrderBy(x => x.Id).ToList();

        var getClientsReturn = ClientMapper.ClientsToGetClientsReturn(clients);
        return getClientsReturn;
    }
}