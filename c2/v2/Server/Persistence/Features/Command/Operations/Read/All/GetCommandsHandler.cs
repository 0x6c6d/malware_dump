using Persistence.Features.Command.Models;
using Persistence.Features.Command.Repositories;

namespace Persistence.Features.Command.Operations.Read.All;

public class GetCommandsHandler(ICommandRepository commandRepository) : IRequestHandler<GetCommandsRequest, List<GetCommandsReturn>>
{
    public async Task<List<GetCommandsReturn>> Handle(GetCommandsRequest request, CancellationToken cancellationToken)
    {
        var clients = (await commandRepository.GetAllAsync()).OrderBy(x => x.Ip).ToList();

        var getClientsReturn = CommandMapper.CommandsToGetCommandsReturn(clients);
        return getClientsReturn;
    }
}