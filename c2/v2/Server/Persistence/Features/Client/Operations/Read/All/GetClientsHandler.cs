using Persistence.Features.Client.Repositories;
using ClientMapper = Persistence.Features.Client.Models.ClientMapper;

namespace Persistence.Features.Client.Operations.Read.All;

public class GetClientsHandler(IClientRepository clientRepository) : IRequestHandler<GetClientsRequest, List<GetClientsReturn>>
{
    public async Task<List<GetClientsReturn>> Handle(GetClientsRequest request, CancellationToken cancellationToken)
    {
        var clients = (await clientRepository.GetAllAsync()).OrderBy(x => x.Ip).ToList();

        var getClientsReturn = ClientMapper.ClientsToGetClientsReturn(clients);
        return getClientsReturn;
    }
}